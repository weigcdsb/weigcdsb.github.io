<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Diffusion Mumbling | </title> <meta name="author" content="Ganchao Wei"> <meta name="description" content="A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. "> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://weigcdsb.github.io/blog/2025/diffusion-stuff/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/blogs/">Blogs </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Diffusion Mumbling</h1> <p class="post-meta"> Created in September 21, 2025 </p> <p class="post-tags"> <a href="/blog/2025"> <i class="fa-solid fa-calendar fa-sm"></i> 2025 </a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p>This post collects some of my recent thoughts and readings on diffusion models. As things are not formal, I simply call them “diffusion mumbling”, as they are literally some sweet mumblings. While many of the notes and opinions are very personal (it is my blog, after all, yay), I’ll try to keep them clear and reasonable. A more structured summary can be found in these <a href="/assets/slides/Diffusion%20Mumbling_09212025.pdf">slides</a>. I won’t repeat everything here: partly because I’m lazy, partly because this is just a personal note. In short, there are two major sections (weighting and ELBO/ likelihood) and two minor sections (prior and sampling), which I’ll briefly outline below. Many ideas are inspired from these two fantastic blogs(<a href="https://d2jud02ci9yv69.cloudfront.net/2025-04-28-diffusion-flow-173/blog/diffusion-flow/" rel="external nofollow noopener" target="_blank">1</a> and <a href="https://sander.ai/2024/06/14/noise-schedules.html?utm_source=chatgpt.com#overview" rel="external nofollow noopener" target="_blank">2</a>). For paper references, see the slides for details.</p> <h1 id="1-weighting-in-the-unifying-framework">1. Weighting in the Unifying Framework</h1> <p>When we put the loss function of a variety of diffusion models (e.g. DDPM, score matching and flow matching) together, they look strikingly similar. Therefore, a natural idea is to find a framework to unify them. As far as I know, there are at least two papers on this: the <a href="https://arxiv.org/abs/2303.08797" rel="external nofollow noopener" target="_blank">“stochastic interpolant”</a> paper and <a href="https://openreview.net/pdf?id=NnMEadcdyD" rel="external nofollow noopener" target="_blank">“understanding diffusion objective”</a> paper. I read the “stochastic interpolant” first, which unifies things mainly from ODE/ SDE perspective. This work is great, comprehesive, and mathematically sophisticated. But, at least for me, the inspiration it provided is relatively limited. However, when I later read the “understanding diffusion” one, which frames things mainly from the loss and likelihood perspective, I would say it is breathtaking! For anyone interested in diffusion models, I would recommend it as a must have to read.</p> <p>OK, here’s my very personal take. For diffusion models, both the ODE/SDE view and the loss/prob view are important. The ODE/SDE side helps us dig into technical details and inspires new model designs, while the loss/prob side gives a higher-level understanding. Why do I say this? Because diffusion models are basically stacked (or hierarchical) VAEs, and the ODE/SDE is what “glues” the different layers together. To really get the big picture, we usually have to go back to the original purpose and motivation, which is all about VAE/ loss/ prob. But to actually make diffusion models work, we need clever ways to design the “junctions” between layers. That’s the hard part, and the design really depends on the data. This is exactly where ODE/SDE perspectives kick in.</p> <p>In the “understanding” paper, they first unify almost all diffusion models with 1) Gaussian source and 2) linear noise schedule/ interpolation ($z_t = \alpha_t x + \sigma_t \epsilon$, where $x$ is data and $\epsilon ~ N(0, I)$ is the Gaussian noise). After some reparametrizations/ rearrangements, everything is reduced to weighting of the loss (if we seperate the noise schedule out, which is essentially importance sampling). This is fantastic and very inspiring! When we spot on the weighting for different diffusion models, we can see that:</p> <ol> <li>The diffusion models put a large weight on low SNR, i.e., closer to noise. This is why the diffusion models are fantastic in perceptual data (e.g., image, video, sound): we human are mainly sensitive low-frequency/ low-resolution part of perceptual data, and diffusion model just cater us on this. Basically, the model has limited capacity, and it cannot do perfectly for both high and low frequency domain. The diffusion models just sacrifice the high frequency part to make things “look”/ “sound” perfect.</li> <li>The flow matching (FM) is very efficient, since it aggresively put almost all the weight to the low-SNR region. And this is why we usually see FM almost complete generation in the first few steps! FM is too aggresive on low-SNR part, and we need to let it slow down. Therefore, in stable diffusion 3, we re-design the weighting to make it focus a bit more in the middle region.</li> </ol> <p>To be continued… (09/26/2025)</p> </div> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Ganchao Wei. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> </body> </html>